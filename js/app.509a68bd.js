(function(){"use strict";var e={7216:function(e,t,n){var i=n(3396);function a(e,t){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}var o=n(89);const r={},l=(0,o.Z)(r,[["render",a]]);var c=l,u=n(2483),s=n(4870),g=n(1020);const v=(0,g.Q_)("gameStore",(()=>{const e=(0,s.iH)(!0),t=(0,i.Fl)((()=>e.value));function n(t){e.value=t}return{getGameStatus:t,changeGameStatus:n}}));var d=n(9242);const f=e=>((0,i.dD)("data-v-74a70422"),e=e(),(0,i.Cn)(),e),m=f((()=>(0,i._)("div",{class:"gameOverTitle"},"Game Over",-1))),h=(0,i.aZ)({name:"GameOverComponent"});var B=(0,i.aZ)({...h,setup(e){const t=v();function n(){t.changeGameStatus(!0)}return(e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"gameOverScene",onClick:t[0]||(t[0]=(0,d.iM)((()=>{}),["stop"]))},[(0,i._)("div",{class:"gameOverfloatMenu"},[m,(0,i._)("div",{class:"gameOverMenu",onClick:n},"Restart")])]))}});const p=(0,o.Z)(B,[["__scopeId","data-v-74a70422"]]);var w=p,y=n(7139);function x(e,t,n=0){const i=Math.max(Math.min(t,e),n);return{value:i,clampNeedeed:i!==e}}function S(e,t,n){return e>=n&&e<=t}function b(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function P(e,t,n){const i=(Math.pow(e,2)+Math.pow(t,2)-Math.pow(n,2))/(2*e*t),a=Math.acos(i);return a}const k=(0,g.Q_)("ballStore",(()=>{const e=(0,s.iH)({x:0,y:0}),t=(0,s.iH)(20),n=(0,s.iH)({x:5,y:5}),a=(0,s.iH)(!0),o=(0,i.Fl)((()=>e.value)),r=(0,i.Fl)((()=>t.value)),l=(0,i.Fl)((()=>n.value)),c=(0,i.Fl)((()=>a.value));function u(t){e.value=t}function g(t){e.value.x+=t}function v(t){e.value.y=t}function d(e){t.value=e}function f(e){n.value=e}function m(){n.value.x=-n.value.x}function h(){n.value.y=-n.value.y}function B(e){a.value=e}return{getBallPosition:o,getBallSize:r,getVector:l,getBallIsCaptured:c,changeBallPosition:u,changeBallPositionXByDiff:g,changeBallPositionY:v,changeBallSize:d,changeVector:f,mirrorVectorX:m,mirrorVectorY:h,changeBallCapture:B}})),z=(0,g.Q_)("baseStore",(()=>{const e=(0,s.iH)({x:0,y:0}),t=(0,s.iH)({x:0,y:0}),n=(0,s.iH)(new Set),a=(0,i.Fl)((()=>e.value)),o=(0,i.Fl)((()=>t.value)),r=(0,i.Fl)((()=>n.value));function l(e){c(e.x),u(e.y)}function c(t){e.value.x=t}function u(t){e.value.y=t}function g(e){t.value=e}function v(e){t.value.x=e}function d(e){n.value.add(e)}function f(e){n.value.delete(e)}return{getBasePosition:a,getBaseSize:o,getBaseModes:r,changeBasePosition:l,changeBasePositionX:c,changeBaseSize:g,changeBaseWidth:v,addBaseMode:d,removeBaseMode:f}})),M=(0,i.aZ)({name:"BallComponent"});var C=(0,i.aZ)({...M,setup(e){let t,n=8,a=!1,o=k(),r=(0,s.iH)(k()),l=z(),c=v();function u(){let e=o.getBallPosition.y>=l.getBasePosition.y-o.getBallSize,t=S(o.getBallPosition.x,l.getBasePosition.x+l.getBaseSize.x,l.getBasePosition.x);return e&&t}function g(){M();let e=l.getBasePosition.x+l.getBaseSize.x/2,t={x:e,y:l.getBasePosition.y},n=o.getBallPosition.x-o.getVector.x/10,i=o.getBallPosition.y-o.getVector.y/10,a={x:n,y:i},r=l.getBaseSize.x/2,c=b(t,a),u=b(l.getBasePosition,a);const s=P(r,c,u),g=Math.PI-s;let v=Math.sqrt(Math.pow(o.getVector.x,2)+Math.pow(o.getVector.y,2)),d=v*Math.sin(g),f=v*Math.cos(g);o.changeVector({x:f,y:-d})}function d(e=!1){let n=x(o.getBallPosition.x+o.getVector.x,window.innerWidth-o.getBallSize),i=x(o.getBallPosition.y+o.getVector.y,window.innerHeight-o.getBallSize);if(i.value==window.innerHeight-o.getBallSize)c.changeGameStatus(!1);else if(l.getBaseModes.has("catch")&&e){o.changeBallCapture(!0);let e=p();i.value=e.y-o.getBallSize/2}o.changeBallPosition({x:n.value,y:i.value}),t.style.left=n.value+"px",t.style.top=i.value+"px",e||(n.clampNeedeed&&o.mirrorVectorX(),i.clampNeedeed&&o.mirrorVectorY())}function f(){if(c.getGameStatus){let e=u();e&&g(),d(e),setTimeout((()=>{!o.getBallIsCaptured&&requestAnimationFrame(f)}),n)}}function m(){t||(t=document.getElementById("ball")),B();let e=p();o.changeBallPosition(e),w(),t&&requestAnimationFrame(f)}function h(){o.changeBallSize(0),o.changeBallCapture(!0)}function B(){let e=Math.max(window.innerWidth,window.innerHeight)/120;o.changeBallSize(e)}function p(){let e=window.innerHeight/100,t=window.innerWidth/192,n=window.innerWidth/2-o.getBallSize/2,i=window.innerHeight-(t+e+o.getBallSize/2+2);return{x:n,y:i}}function w(){let e=window.innerWidth/200,t=window.innerHeight/400;o.changeVector({x:e,y:-t})}function M(){let e=document.getElementById("base");e?.classList.add("hit"),setTimeout((()=>{e?.classList.remove("hit")}),150)}return(0,i.YP)((()=>c.getGameStatus),(e=>{e?m():h()})),(0,i.YP)((()=>o.getBallIsCaptured),(e=>{!e&&requestAnimationFrame(f)})),(0,i.YP)((()=>l.getBasePosition.x),((e,n)=>{if(a){if(o.getBallIsCaptured){let i=e-n;o.changeBallPositionXByDiff(i),t.style.left=o.getBallPosition.x+"px"}}else a=!0})),(0,i.bv)((()=>{m()})),(0,i.Ah)((()=>{h()})),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{id:"ball",class:"ball",style:(0,y.j5)({height:(0,s.SU)(r).getBallSize+"px"})},null,4))}});const H=C;var O=H;const _=(0,i.aZ)({name:"BaseComponent"});var V=(0,i.aZ)({..._,setup(e){let t;const n=(0,s.iH)(z()),a=k(),o=v();function r(){let e=window.innerHeight/100,t=window.innerWidth/10,i=window.innerWidth/192;n.value.changeBaseSize({x:t,y:i});let a=window.innerWidth/2-n.value.getBaseSize.x/2,o=window.innerHeight-(i+e);n.value.changeBasePosition({x:a,y:o}),n.value.addBaseMode("normal"),g()}function l(e){const t=x(e.clientX,window.innerWidth-n.value.getBaseSize.x-2);n.value.changeBasePositionX(t.value)}function c(){a.getBallIsCaptured&&a.changeBallCapture(!1)}function u(){t||(t=document.getElementById("base")),t&&r()}function g(){window.addEventListener("mousemove",l),window.addEventListener("click",c)}function d(){window.removeEventListener("mousemove",l),window.removeEventListener("click",c)}return(0,i.YP)((()=>o.getGameStatus),(e=>{e?u():d()})),(0,i.bv)((()=>{console.log("base mounted"),u()})),(0,i.Ah)((()=>{d()})),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{id:"base",class:"base",style:(0,y.j5)({left:n.value.getBasePosition.x+"px",top:n.value.getBasePosition.y+"px",width:n.value.getBaseSize.x+"px",height:n.value.getBaseSize.y+"px"})},null,4))}});const Z=V;var F=Z;const W=(0,g.Q_)("brickStore",(()=>{let e=!1;const t=(0,s.iH)(new Array),n=(0,i.Fl)((()=>t.value));function a(e){t.value=e}function o(n,i){e||(e=!0,t.value[n].exists=!1,"horizontal"==i?k().mirrorVectorX():k().mirrorVectorY(),setTimeout((()=>{e=!1}),1))}return{getBrickLayout:n,changeBrickLayout:a,removeElementFromLayout:o}})),G=["id"],I=(0,i.aZ)({name:"BrickComponent"});var L=(0,i.aZ)({...I,props:{index:{type:Number,required:!0}},setup(e){const t=e;let n;const a=k(),o=W();function r(e){o.removeElementFromLayout(t.index,e)}function l(){const e=document.getElementById("brick_"+t.index);e&&(n=e.getBoundingClientRect())}return(0,i.YP)((()=>a.getBallPosition),(e=>{const t=x(e.x,n.right+a.getBallSize/2,n.left-a.getBallSize/2);if(!t.clampNeedeed){const t=x(e.y,n.bottom+a.getBallSize/2,n.top-a.getBallSize/2);if(!t.clampNeedeed){let t,i=e.x-n.left,a=n.right-e.x,o=e.y-n.top,l=n.bottom-e.y,c=Math.min(i,a,o,l);t=c==l||c==o?"vertical":"horizontal",r(t)}}})),(0,i.bv)((()=>{l()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{id:"brick_"+t.index,class:"brick"},null,8,G))}});const j=L;var D=j;const E={class:"brickContainer"},Y=(0,i.aZ)({name:"BrickSceneComponent",components:{BrickComponent:D}});var q=(0,i.aZ)({...Y,setup(e){const t=(0,s.iH)(W()),n=v();function a(e=500){const n=new Array;for(let t=0;t<e;++t)n[t]={exists:Math.random()<.5,type:"normal"};t.value.changeBrickLayout(n)}return(0,i.YP)((()=>n.getGameStatus),(e=>{e&&a()})),(0,i.bv)((()=>{a()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",E,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.value.getBrickLayout,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"outerBrick"},[e.exists?((0,i.wg)(),(0,i.j4)(D,{key:0,index:t},null,8,["index"])):(0,i.kq)("",!0)])))),128))]))}});const X=(0,o.Z)(q,[["__scopeId","data-v-a35c43fa"]]);var A=X;const N={class:"scene"},T=(0,i.aZ)({name:"GameView",components:{BallComponent:O,BaseComponent:F,GameOverComponent:w,BrickSceneComponent:A}});var Q=(0,i.aZ)({...T,setup(e){const t=(0,s.iH)(v());return(0,i.bv)((()=>{console.log("mounted gameview")})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",N,[t.value.getGameStatus?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(w,{key:0})),(0,i.Wm)(A),(0,i.Wm)(F),(0,i.Wm)(O)]))}});const R=(0,o.Z)(Q,[["__scopeId","data-v-6a07aa60"]]);var K=R;const U=[{path:"/",name:"home",component:K}],J=(0,u.p7)({history:(0,u.PO)("/brick-breaker/"),routes:U});var $=J;const ee=(0,g.WB)(),te=(0,d.ri)(c);te.use($).use(ee).mount("#app")}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var r=1/0;for(s=0;s<e.length;s++){i=e[s][0],a=e[s][1],o=e[s][2];for(var l=!0,c=0;c<i.length;c++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(l=!1,o<r&&(r=o));if(l){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[i,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],l=i[1],c=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(c)var s=c(n)}for(t&&t(i);u<r.length;u++)o=r[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(s)},i=self["webpackChunkbrick_breaker"]=self["webpackChunkbrick_breaker"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(7216)}));i=n.O(i)})();
//# sourceMappingURL=app.509a68bd.js.map